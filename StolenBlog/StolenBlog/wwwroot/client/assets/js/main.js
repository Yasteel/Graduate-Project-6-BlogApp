import{_ as g,o as C,c as w,a as s,b as c,d as n,t as r,r as u,e as p,u as D,w as x,v as S,F as v,f as y,g as k,p as N,h as B,i as P,j as b,k as A}from"./style.js";import{s as f}from"./store.js";const M={class:"commentContainer"},U={class:"header"},j={class:"name"},V={class:"timestamp"},E={class:"content"},T={__name:"Comments",props:{content:{}},setup(m){const t=m;C(()=>{console.log(t.content)});const e=w(()=>{let o=new Date-new Date(t.content.dateUpdated);if(o<1e3*60)return"a minute ago";if(o<1e3*60*60)return`${Math.floor(o/(1e3*60))}  minutes ago`;if(o<1e3*60*60*24)return`${Math.floor(o/(1e3*60*60))}  hours ago`;var _=new Date(t.content.dateUpdated);return _.toLocaleDateString()});return(a,o)=>(s(),c("div",M,[n("div",U,[n("p",j,r(t.content.displayName),1),n("p",V,r(e.value),1)]),n("div",E,[n("p",null,r(t.content.comment),1)])]))}},F=g(T,[["__scopeId","data-v-44ffba43"]]);const O={class:"postContainer"},H={class:"header"},J={class:"name"},q={class:"timestamp"},z={class:"content"},G={class:"commentAction"},K={key:0},Q={key:1},R={key:0},W={key:1},X={key:0,class:"addComment"},Y={key:1,class:"comments"},Z={__name:"BlogPost",props:{content:{}},setup(m){const t=m,e=u({postId:null,heading:"",displayName:"",content:"",timestamp:"",user:{},comments:[]});C(()=>{e.postId=t.content.postId,e.heading=t.content.heading,e.displayName=t.content.users.displayName,e.content=t.content.description,e.timestamp=t.content.dateUpdated,e.user=t.content.users,getComments(t.content.postId,i=>{i.data.length>0&&(e.comments=i.data)},i=>{})});const a=u({showComments:!1,addComment:!1}),o=u({comment:""}),_=()=>{a.showComments=!a.showComments},h=()=>{o.comment="",a.addComment=!a.addComment},$=()=>{getUserByEmail(f.userEmail,i=>{var d={postId:e.postId,comment:o.comment,userId:i.data.userId};createComment(d,f.token,l=>{alert("Comment Posted"),a.addComment=!1},l=>{alert(`error - 1 ${JSON.stringify(rej)}`)})},i=>{console.log(i)})},L=w(()=>{let d=new Date-new Date(e.timestamp);if(d<1e3*60)return"a minute ago";if(d<1e3*60*60)return`${Math.floor(d/(1e3*60))}  minutes ago`;if(d<1e3*60*60*24)return`${Math.floor(d/(1e3*60*60))}  hours ago`;var l=new Date(e.timestamp);return l.toLocaleDateString()});return(i,d)=>(s(),c("div",O,[n("div",H,[n("p",J,r(e.displayName),1),n("p",q,r(L.value),1)]),n("div",z,[n("h4",null,r(e.heading),1),n("p",null,r(e.content),1)]),n("div",G,[n("p",null,[e.comments.length>0?(s(),c("a",{key:0,href:"#",onClick:_},[a.showComments?(s(),c("span",K,"Hide Comments")):(s(),c("span",Q,"Show Comments"))])):p("",!0)]),D(f).loggedIn?(s(),c("button",{key:0,onClick:h},[a.addComment?(s(),c("span",R,"Cancel")):(s(),c("span",W,"Post Comment +"))])):p("",!0)]),a.addComment?(s(),c("div",X,[x(n("textarea",{"onUpdate:modelValue":d[0]||(d[0]=l=>o.comment=l)},null,512),[[S,o.comment]]),n("button",{onClick:$},"Post Comment")])):p("",!0),e.comments.length>0&&a.showComments?(s(),c("div",Y,[(s(!0),c(v,null,y(e.comments,l=>(s(),k(F,{key:l.commentId,content:l},null,8,["content"]))),128))])):p("",!0)]))}},ee=g(Z,[["__scopeId","data-v-c54350a1"]]);const I=m=>(N("data-v-ad581c29"),m=m(),B(),m),te={key:0},oe=I(()=>n("i",{class:"fa-solid fa-spinner fa-spin"},null,-1)),ne=I(()=>n("h3",null,"Loading",-1)),se=[oe,ne],ae={__name:"Loading",setup(m,{expose:t}){const e=u({show:!1});return t({showLoading:()=>{alert("loading"),e.show=!0},hideLoading:()=>{e.show=!1}}),(_,h)=>e.show?(s(),c("div",te,se)):p("",!0)}},ce=g(ae,[["__scopeId","data-v-ad581c29"]]);const de={__name:"App",setup(m){const t=u({posts:[]}),e=P(null);C(()=>{e.showLoading,getPosts(o=>{console.log(o),a(),t.posts=o.data},o=>{alert(o)})});const a=()=>{e.hideLoading};return(o,_)=>(s(),c(v,null,[n("div",null,[(s(!0),c(v,null,y(t.posts,h=>(s(),k(ee,{content:h},null,8,["content"]))),256))]),b(ce,{ref_key:"loadingScreen",ref:e},null,512)],64))}},me=g(de,[["__scopeId","data-v-c4c1ce99"]]);A(me).mount("#app");
